<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui">
    
    <ui:composition>
        <h:form>
            <p:commandLink update="@form" >
                Restaurar
                <b:iconAwesome name="refresh" spin="true" />
            </p:commandLink>
            <p:commandLink onclick="exportChart();">
                Exportar
                <b:iconAwesome name="file-image-o" />
            </p:commandLink>
            <p:chart id="grafico"  type="line" model="#{relCallsGrafic.lineCalls}" responsive="true" widgetVar="chart" />         
        </h:form>
        <p:dialog widgetVar="dlg" showEffect="blind" modal="true" header="GrÃ¡fico como Imagem" resizable="false">
            <p:outputPanel id="output" layout="block" style="width: 80%"/>
        </p:dialog>
        <script>
            function exportChart() {
                //export image
                $('#output').empty().append(PF('chart').exportAsImage());

                //show the dialog
                PF('dlg').show();
            }
            </script>
    </ui:composition>
</html>

